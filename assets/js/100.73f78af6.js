(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{496:function(t,a,s){"use strict";s.r(a);var r=s(42),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"调试-用于发现和解决问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调试-用于发现和解决问题"}},[t._v("#")]),t._v(" 调试: 用于发现和解决问题")]),t._v(" "),s("h2",{attrs:{id:"內省"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#內省"}},[t._v("#")]),t._v(" 內省")]),t._v(" "),s("h3",{attrs:{id:"显式异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#显式异常"}},[t._v("#")]),t._v(" 显式异常")]),t._v(" "),s("p",[t._v("一些明确由throw关键词触发的异常抛出称为显式异常。显式异常通常由try catch块处理。")]),t._v(" "),s("h3",{attrs:{id:"隐式异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#隐式异常"}},[t._v("#")]),t._v(" 隐式异常")]),t._v(" "),s("p",[t._v("在运行时不由throw关键字触发的异常。比如拼写错误引用了未声明的变量，通过lint工具可以在开发阶段找到许多这类问题。")]),t._v(" "),s("h3",{attrs:{id:"错误事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误事件"}},[t._v("#")]),t._v(" 错误事件")]),t._v(" "),s("p",[t._v("在node中，错误事件可以在任意继承EventEmitter的对象触发( emit('error') ),如果没有相应的处理，Node会抛出错误异常。所以，要尽可能绑定错误处理事件。")]),t._v(" "),s("h3",{attrs:{id:"错误参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误参数"}},[t._v("#")]),t._v(" 错误参数")]),t._v(" "),s("p",[t._v("在node中，异步操作发生的错误通常会作为回调函数的第一个参数传递过去。这个参数最好要处理，比如用一个统一的处理函数，避免引发其他错误。")]),t._v(" "),s("h3",{attrs:{id:"技巧88-处理未捕获的异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技巧88-处理未捕获的异常"}},[t._v("#")]),t._v(" 技巧88 处理未捕获的异常")]),t._v(" "),s("p",[t._v("当程序抛出未处理的异常的时候，Node默认会终止程序的执行，可以在process对象上设置未捕获异常的处理函数")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uncaughtException'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("这样不会终止程序进行，但是其实掩盖了错误，更好的做法是在uncaughtException回调中打印日志，然后把应用退出，等待重启。")]),t._v(" "),s("h3",{attrs:{id:"技巧89-检查我们的node代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技巧89-检查我们的node代码"}},[t._v("#")]),t._v(" 技巧89 检查我们的Node代码")]),t._v(" "),s("p",[t._v("使用eslint代码检查工具")]),t._v(" "),s("h2",{attrs:{id:"问题的调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题的调试"}},[t._v("#")]),t._v(" 问题的调试")]),t._v(" "),s("h3",{attrs:{id:"技巧90-使用node内置的调试器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技巧90-使用node内置的调试器"}},[t._v("#")]),t._v(" 技巧90 使用Node内置的调试器")]),t._v(" "),s("p",[t._v("使用node debug")]),t._v(" "),s("h3",{attrs:{id:"技巧91-使用node-inspector"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技巧91-使用node-inspector"}},[t._v("#")]),t._v(" 技巧91 使用Node Inspector")]),t._v(" "),s("p",[t._v("node-inspector是一个第三方模块，可以把调试信息从Node拿出来，放到Chrome开发者工具中")]),t._v(" "),s("h3",{attrs:{id:"技巧92-对node应用进行性能分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技巧92-对node应用进行性能分析"}},[t._v("#")]),t._v(" 技巧92 对Node应用进行性能分析")]),t._v(" "),s("p",[t._v("使用 node --prof 统计代码开销时间")]),t._v(" "),s("h3",{attrs:{id:"技巧93-内存泄漏的调整"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技巧93-内存泄漏的调整"}},[t._v("#")]),t._v(" 技巧93 内存泄漏的调整")]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("process.memoryUsage()")]),t._v("查询内存使用")])])}),[],!1,null,null,null);a.default=e.exports}}]);