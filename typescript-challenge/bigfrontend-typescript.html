<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>bigfrontend的TypeScript问题 | notebook</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/notebook/favicon.ico">
    <meta name="description" content="">
    <link rel="preload" href="/notebook/assets/css/0.styles.cc688538.css" as="style"><link rel="preload" href="/notebook/assets/js/app.5c5188eb.js" as="script"><link rel="preload" href="/notebook/assets/js/2.d716b987.js" as="script"><link rel="preload" href="/notebook/assets/js/87.064f4155.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.d3b3f91c.js"><link rel="prefetch" href="/notebook/assets/js/100.b6f2f84e.js"><link rel="prefetch" href="/notebook/assets/js/101.a58a5a4e.js"><link rel="prefetch" href="/notebook/assets/js/102.c13f2c21.js"><link rel="prefetch" href="/notebook/assets/js/103.1bef21f4.js"><link rel="prefetch" href="/notebook/assets/js/104.f784bba3.js"><link rel="prefetch" href="/notebook/assets/js/105.8a46fec2.js"><link rel="prefetch" href="/notebook/assets/js/106.8e88c759.js"><link rel="prefetch" href="/notebook/assets/js/11.f567fe7f.js"><link rel="prefetch" href="/notebook/assets/js/12.8a41037c.js"><link rel="prefetch" href="/notebook/assets/js/13.58445ca0.js"><link rel="prefetch" href="/notebook/assets/js/14.bda7cb45.js"><link rel="prefetch" href="/notebook/assets/js/15.b157e8c8.js"><link rel="prefetch" href="/notebook/assets/js/16.b5d45783.js"><link rel="prefetch" href="/notebook/assets/js/17.cfd8cce2.js"><link rel="prefetch" href="/notebook/assets/js/18.29fbac42.js"><link rel="prefetch" href="/notebook/assets/js/19.9847eb31.js"><link rel="prefetch" href="/notebook/assets/js/20.03e2649a.js"><link rel="prefetch" href="/notebook/assets/js/21.f0612f47.js"><link rel="prefetch" href="/notebook/assets/js/22.5e4a6f30.js"><link rel="prefetch" href="/notebook/assets/js/23.645cd66d.js"><link rel="prefetch" href="/notebook/assets/js/24.074e14ce.js"><link rel="prefetch" href="/notebook/assets/js/25.160308d6.js"><link rel="prefetch" href="/notebook/assets/js/26.8cf8d393.js"><link rel="prefetch" href="/notebook/assets/js/27.efaceacc.js"><link rel="prefetch" href="/notebook/assets/js/28.fe9ee49c.js"><link rel="prefetch" href="/notebook/assets/js/29.a61e7be4.js"><link rel="prefetch" href="/notebook/assets/js/3.b76ac5b9.js"><link rel="prefetch" href="/notebook/assets/js/30.d1dc98ac.js"><link rel="prefetch" href="/notebook/assets/js/31.08c1b55c.js"><link rel="prefetch" href="/notebook/assets/js/32.c9e58d3e.js"><link rel="prefetch" href="/notebook/assets/js/33.07a66251.js"><link rel="prefetch" href="/notebook/assets/js/34.5be4aa0a.js"><link rel="prefetch" href="/notebook/assets/js/35.175d8290.js"><link rel="prefetch" href="/notebook/assets/js/36.b5ae5458.js"><link rel="prefetch" href="/notebook/assets/js/37.1f39506d.js"><link rel="prefetch" href="/notebook/assets/js/38.8774c5e5.js"><link rel="prefetch" href="/notebook/assets/js/39.6d9ce7c2.js"><link rel="prefetch" href="/notebook/assets/js/4.1db693c3.js"><link rel="prefetch" href="/notebook/assets/js/40.f068cfb8.js"><link rel="prefetch" href="/notebook/assets/js/41.c579a2fa.js"><link rel="prefetch" href="/notebook/assets/js/42.8fff6f2b.js"><link rel="prefetch" href="/notebook/assets/js/43.4406d75f.js"><link rel="prefetch" href="/notebook/assets/js/44.c6587811.js"><link rel="prefetch" href="/notebook/assets/js/45.da00a943.js"><link rel="prefetch" href="/notebook/assets/js/46.235ded00.js"><link rel="prefetch" href="/notebook/assets/js/47.991cb4a5.js"><link rel="prefetch" href="/notebook/assets/js/48.4408316b.js"><link rel="prefetch" href="/notebook/assets/js/49.cc1d125f.js"><link rel="prefetch" href="/notebook/assets/js/5.ec07def1.js"><link rel="prefetch" href="/notebook/assets/js/50.8232f294.js"><link rel="prefetch" href="/notebook/assets/js/51.be4da1b8.js"><link rel="prefetch" href="/notebook/assets/js/52.14388c53.js"><link rel="prefetch" href="/notebook/assets/js/53.a2a1ae5d.js"><link rel="prefetch" href="/notebook/assets/js/54.4888733d.js"><link rel="prefetch" href="/notebook/assets/js/55.309d5e31.js"><link rel="prefetch" href="/notebook/assets/js/56.7b303116.js"><link rel="prefetch" href="/notebook/assets/js/57.f6ba05f0.js"><link rel="prefetch" href="/notebook/assets/js/58.af11bac6.js"><link rel="prefetch" href="/notebook/assets/js/59.ffb589f2.js"><link rel="prefetch" href="/notebook/assets/js/6.3f9f472c.js"><link rel="prefetch" href="/notebook/assets/js/60.abfdf6f3.js"><link rel="prefetch" href="/notebook/assets/js/61.bb4ed176.js"><link rel="prefetch" href="/notebook/assets/js/62.00c0dc69.js"><link rel="prefetch" href="/notebook/assets/js/63.6cb14558.js"><link rel="prefetch" href="/notebook/assets/js/64.54879b8a.js"><link rel="prefetch" href="/notebook/assets/js/65.5e137c2c.js"><link rel="prefetch" href="/notebook/assets/js/66.8c25457b.js"><link rel="prefetch" href="/notebook/assets/js/67.5e74cd02.js"><link rel="prefetch" href="/notebook/assets/js/68.1c4608f3.js"><link rel="prefetch" href="/notebook/assets/js/69.3fd86ee5.js"><link rel="prefetch" href="/notebook/assets/js/7.35ef5eb5.js"><link rel="prefetch" href="/notebook/assets/js/70.16fc39a4.js"><link rel="prefetch" href="/notebook/assets/js/71.02230355.js"><link rel="prefetch" href="/notebook/assets/js/72.c651c02c.js"><link rel="prefetch" href="/notebook/assets/js/73.10097084.js"><link rel="prefetch" href="/notebook/assets/js/74.e00be69b.js"><link rel="prefetch" href="/notebook/assets/js/75.a3354e94.js"><link rel="prefetch" href="/notebook/assets/js/76.4d6a35fb.js"><link rel="prefetch" href="/notebook/assets/js/77.b64acaef.js"><link rel="prefetch" href="/notebook/assets/js/78.482684ba.js"><link rel="prefetch" href="/notebook/assets/js/79.d57501d8.js"><link rel="prefetch" href="/notebook/assets/js/8.37a75f1b.js"><link rel="prefetch" href="/notebook/assets/js/80.cb4d06af.js"><link rel="prefetch" href="/notebook/assets/js/81.7007a2f4.js"><link rel="prefetch" href="/notebook/assets/js/82.8f72efcc.js"><link rel="prefetch" href="/notebook/assets/js/83.a1a5bd49.js"><link rel="prefetch" href="/notebook/assets/js/84.91257f11.js"><link rel="prefetch" href="/notebook/assets/js/85.c86f8ee5.js"><link rel="prefetch" href="/notebook/assets/js/86.55802bdd.js"><link rel="prefetch" href="/notebook/assets/js/88.d82545ca.js"><link rel="prefetch" href="/notebook/assets/js/89.027dc418.js"><link rel="prefetch" href="/notebook/assets/js/9.7930d126.js"><link rel="prefetch" href="/notebook/assets/js/90.ed850f15.js"><link rel="prefetch" href="/notebook/assets/js/91.88ca0c77.js"><link rel="prefetch" href="/notebook/assets/js/92.d6b6a32e.js"><link rel="prefetch" href="/notebook/assets/js/93.c6c1f54a.js"><link rel="prefetch" href="/notebook/assets/js/94.5de98b6b.js"><link rel="prefetch" href="/notebook/assets/js/95.3f88a468.js"><link rel="prefetch" href="/notebook/assets/js/96.69f0bccc.js"><link rel="prefetch" href="/notebook/assets/js/97.7049eb91.js"><link rel="prefetch" href="/notebook/assets/js/98.88584078.js"><link rel="prefetch" href="/notebook/assets/js/99.74603357.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.cc688538.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><!----> <span class="site-name">notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/notebook/high-performance-web-site/" class="sidebar-link">高性能网站建设指南</a></li><li><a href="/notebook/illustration-HTTP/" class="sidebar-link">图解HTTP</a></li><li><a href="/notebook/functional-programming-in-javascript/" class="sidebar-link">JavaScript函数式编程指南</a></li><li><a href="/notebook/javascript-framework-design/" class="sidebar-link">JavaScript框架设计</a></li><li><a href="/notebook/front-end-architecture/" class="sidebar-link">前端架构设计</a></li><li><a href="/notebook/web-performance-in-action/" class="sidebar-link">web性能实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#优化css" class="sidebar-link">优化CSS</a></li><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#优化图片" class="sidebar-link">优化图片</a></li><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#优化字体" class="sidebar-link">优化字体</a></li><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#优化javascript" class="sidebar-link">优化JavaScript</a></li><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#基于service-worker和cacahestorage缓存资源" class="sidebar-link">基于service-worker和cacaheStorage缓存资源</a></li><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#使用资源提示" class="sidebar-link">使用资源提示</a></li><li class="sidebar-sub-header"><a href="/notebook/web-performance-in-action/#http2优化" class="sidebar-link">HTTP2优化</a></li></ul></li><li><a href="/notebook/css-in-depth/" class="sidebar-link">深入解析 CSS</a></li><li><a href="/notebook/web-security/" class="sidebar-link">白帽子讲Web安全</a></li><li><a href="/notebook/effective-typescript/" class="sidebar-link">Effective TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#getting-to-know-typescript" class="sidebar-link">Getting to Know TypeScript</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#typescript-t-type-system" class="sidebar-link">TypeScript't Type System</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#type-inference" class="sidebar-link">Type Inference</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#type-design" class="sidebar-link">Type Design</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#working-with-any" class="sidebar-link">Working with any</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#types-declarations-and-types" class="sidebar-link">Types Declarations and @types</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#writing-and-running-your-code" class="sidebar-link">Writing and Running Your Code</a></li><li class="sidebar-sub-header"><a href="/notebook/effective-typescript/#migrating-to-typescript" class="sidebar-link">Migrating to TypeScript</a></li></ul></li><li><a href="/notebook/nodejs-in-practice/" class="sidebar-link">Node.js硬实战：115个核心技巧</a></li><li><a href="/notebook/mastering-modular-javascript/" class="sidebar-link">精通模块化JavaScript</a></li><li><a href="/notebook/svg-essentials/" class="sidebar-link">SVG精髓</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bigfrontend的typescript问题"><a href="#bigfrontend的typescript问题" class="header-anchor">#</a> bigfrontend的TypeScript问题</h1> <p><a href="https://bigfrontend.dev/" target="_blank" rel="noopener noreferrer">bigfrontend<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 大前端？</p> <p>这么多题做下来，感觉用的最多的其实是条件类型+infer</p> <h2 id="typescript内置类型"><a href="#typescript内置类型" class="header-anchor">#</a> TypeScript内置类型</h2> <ul><li>Partial</li> <li>Required</li> <li>Readonly</li> <li>Record</li> <li>Pick</li> <li>Omit</li> <li>Exclude</li> <li>Extract</li> <li>NonNullable</li> <li>Parameters</li> <li>ConstructorParameters</li> <li>ReturnType</li> <li>InstanceType</li> <li>ThisParameterType</li> <li>OmitThisParameter</li></ul> <h2 id="技巧：数值转化成tuple"><a href="#技巧：数值转化成tuple" class="header-anchor">#</a> 技巧：数值转化成Tuple</h2> <h3 id="repeat"><a href="#repeat" class="header-anchor">#</a> Repeat</h3> <p>先考虑这么一个问题：实现一个类型<code>Repeat&lt;T,C&gt;</code>,这个类型返回一个元组，元组的长度为C(意味着C是非负整数)，元组的每一项都是T类型。</p> <p>以下是测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// [number, number, number]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token comment">// [string, string]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// [1]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
</code></pre></div><p>以下是我们的答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Repeat<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span><span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">C</span></span><span class="token operator">?</span><span class="token constant">R</span><span class="token operator">:</span>Repeat<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>其中R是我们结果存放的元组。当元组的长度达到我们需要的长度C时(条件类型的true分支)，我们返回R即可，当不满足时(其实就是长度不够)，我们递归调用Repeat，并且传入的R参数比当前的R长度+1。</p> <p>这样我们就把数值和元组关联起来了。</p> <h3 id="tonumber"><a href="#tonumber" class="header-anchor">#</a> ToNumber</h3> <blockquote><p>请实现<code>ToNumber&lt;T&gt;</code>用来转换字符串为整数。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">'1'</span><span class="token operator">&gt;</span> <span class="token comment">// 1</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">'40'</span><span class="token operator">&gt;</span> <span class="token comment">// 40</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ToNumber<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span><span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token operator">:</span>ToNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>这里还有一个技巧时通过模板字面量类型把数字类型转成字符串类型</p> <h3 id="add"><a href="#add" class="header-anchor">#</a> Add</h3> <blockquote><p>请实现<code>Add&lt;A, B&gt;</code>计算正整数之和。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Add<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token comment">// 3</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Add<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Num2Arr<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span>Num2Arr<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">Add<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>Num2Arr<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token operator">...</span>Num2Arr<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="largerthan"><a href="#largerthan" class="header-anchor">#</a> LargerThan</h3> <blockquote><p>请实现<code>LargerThan&lt;A, B&gt;</code>。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> LargerThan<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> LargerThan<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> LargerThan<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LargerThan<span class="token operator">&lt;</span>
  <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> 
  <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  AList <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  BList <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> AList<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token operator">?</span>
      <span class="token boolean">false</span><span class="token operator">:</span>
      BList<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">B</span></span><span class="token operator">?</span>
        <span class="token boolean">true</span><span class="token operator">:</span> LargerThan<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span>AList<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span>BList<span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="smallerthan"><a href="#smallerthan" class="header-anchor">#</a> SmallerThan</h3> <blockquote><p>请实现<code>SmallerThan&lt;A, B&gt;</code>。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">SmallerThan<span class="token operator">&lt;</span>
  <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> 
  <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  AList <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  BList <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> AList<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token operator">?</span>
      BList<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">B</span></span><span class="token operator">?</span>
        <span class="token boolean">false</span><span class="token operator">:</span><span class="token boolean">true</span>
      <span class="token operator">:</span>
      BList<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">B</span></span><span class="token operator">?</span>
        <span class="token boolean">false</span><span class="token operator">:</span>SmallerThan<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span>AList<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span>BList<span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="repeatstring"><a href="#repeatstring" class="header-anchor">#</a> RepeatString</h3> <blockquote><p>类似于<code>String.prototype.repeat()</code>，请实现<code>RepeatString&lt;T, C&gt;</code>。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// 'aaa'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// ''</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TupleToString<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">A</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">B</span><span class="token punctuation">]</span><span class="token operator">?</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>TupleToString<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span><span class="token constant">A</span> <span class="token operator">:</span><span class="token string">''</span>
<span class="token keyword">type</span> <span class="token class-name">Repeat2Tuple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span><span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">C</span></span><span class="token operator">?</span><span class="token constant">R</span><span class="token operator">:</span>Repeat2Tuple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">RepeatString<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> TupleToString<span class="token operator">&lt;</span>Repeat2Tuple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><h2 id="tuple"><a href="#tuple" class="header-anchor">#</a> Tuple</h2> <h3 id="push"><a href="#push" class="header-anchor">#</a> Push</h3> <blockquote><p>请实现<code>Push&lt;T, I&gt;</code>。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">&gt;</span> <span class="token comment">// [2,3]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token comment">// [1, 2]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// [string]</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Push<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">I</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">I</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="shift"><a href="#shift" class="header-anchor">#</a> Shift</h3> <blockquote><p>请实现<code>Shift&lt;T&gt;</code>来去掉tuple的第一个元素</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Shift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [2,3]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Shift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Shift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Shift<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="reversetuple"><a href="#reversetuple" class="header-anchor">#</a> ReverseTuple</h3> <blockquote><p>Implement <code>ReverseTuple&lt;T&gt;</code> to reverse a tuple type.</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> ReverseTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [boolean, number, string]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> ReverseTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [3,2,1]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> ReverseTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ReverseTuple<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span>first<span class="token operator">:</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">,</span><span class="token operator">...</span>rest<span class="token operator">:</span><span class="token keyword">infer</span> <span class="token constant">O</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token operator">...</span>ReverseTuple<span class="token operator">&lt;</span><span class="token constant">O</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span>
</code></pre></div><h3 id="tupletounion"><a href="#tupletounion" class="header-anchor">#</a> TupleToUnion</h3> <blockquote><p>Given a tuple type, implement <code>TupleToUnion&lt;T&gt;</code> to get a union type from it.</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> TupleToUnion<span class="token operator">&lt;</span>Foo<span class="token operator">&gt;</span> <span class="token comment">// string | number | boolean</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TupleToUnion<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="lengthoftuple"><a href="#lengthoftuple" class="header-anchor">#</a> LengthOfTuple</h3> <blockquote><p>请实现<code>LengthOfTuple&lt;T&gt;</code>返回tuple type的长度。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> LengthOfTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 3</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> LengthOfTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LengthOfTuple<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span>length<span class="token operator">:</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">}</span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="firstitem"><a href="#firstitem" class="header-anchor">#</a> FirstItem</h3> <blockquote><p>请实现<code>FirstItem&lt;T&gt;</code>来返回tuple type的第一个type。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> FirstItem<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> FirstItem<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 'B'</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">FirstItem<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lastitem"><a href="#lastitem" class="header-anchor">#</a> LastItem</h3> <blockquote><p>请实现<code>LastItem&lt;T&gt;</code>用以返回tuple的最后一个type。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> LastItem<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// boolean</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> LastItem<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 'E'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> LastItem<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LastItem<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="string"><a href="#string" class="header-anchor">#</a> String</h2> <p>字符串相关的基本需要TypeScript版本最少4.1</p> <h3 id="firstchar"><a href="#firstchar" class="header-anchor">#</a> FirstChar</h3> <blockquote><p>请实现<code>FirstChar&lt;T&gt;</code>返回头文字type。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> FirstChar<span class="token operator">&lt;</span><span class="token string">'BFE'</span><span class="token operator">&gt;</span> <span class="token comment">// 'B'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> FirstChar<span class="token operator">&lt;</span><span class="token string">'dev'</span><span class="token operator">&gt;</span> <span class="token comment">// 'd'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> FirstChar<span class="token operator">&lt;</span><span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">FirstChar<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">O</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span><span class="token builtin">never</span>
</code></pre></div><h3 id="lastchar"><a href="#lastchar" class="header-anchor">#</a> LastChar</h3> <blockquote><p>类似于<code>FirstChar&lt;T&gt;</code>，请实现<code>LastChar&lt;T&gt;</code>。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> LastChar<span class="token operator">&lt;</span><span class="token string">'BFE'</span><span class="token operator">&gt;</span> <span class="token comment">// 'E'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> LastChar<span class="token operator">&lt;</span><span class="token string">'dev'</span><span class="token operator">&gt;</span> <span class="token comment">// 'v'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> LastChar<span class="token operator">&lt;</span><span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LastChar<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">O</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span><span class="token constant">O</span> <span class="token keyword">extends</span> <span class="token string">''</span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span>LastChar<span class="token operator">&lt;</span><span class="token constant">O</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token builtin">never</span>
</code></pre></div><h3 id="stringtotuple"><a href="#stringtotuple" class="header-anchor">#</a> StringToTuple</h3> <blockquote><p>请实现<code>StringToTuple&lt;T&gt;</code>将字符串拆散为tuple。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> StringToTuple<span class="token operator">&lt;</span><span class="token string">'BFE.dev'</span><span class="token operator">&gt;</span> <span class="token comment">// ['B', 'F', 'E', '.', 'd', 'e','v']</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> StringToTuple<span class="token operator">&lt;</span><span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StringToTuple<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span> StringToTuple<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">,</span><span class="token constant">A</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">:</span><span class="token constant">U</span>
</code></pre></div><h3 id="lengthofstring"><a href="#lengthofstring" class="header-anchor">#</a> LengthOfString</h3> <blockquote><p>请实现<code>LengthOfString&lt;T&gt;</code>用以返回字符串长度。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> LengthOfString<span class="token operator">&lt;</span><span class="token string">'BFE.dev'</span><span class="token operator">&gt;</span> <span class="token comment">// 7</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> LengthOfString<span class="token operator">&lt;</span><span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LengthOfString<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span>LengthOfString<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token operator">:</span><span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><p>类似于将数字转换为Tuple，这里通过递归和infer不断拆解字符串，转换为Tuple</p> <h3 id="trim"><a href="#trim" class="header-anchor">#</a> Trim</h3> <blockquote><p>正如String.prototype.trim()，请实现<code>Trim&lt;T&gt;</code></p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Trim<span class="token operator">&lt;</span><span class="token string">'    BFE.dev'</span><span class="token operator">&gt;</span> <span class="token comment">// 'BFE'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Trim<span class="token operator">&lt;</span><span class="token string">' BFE. dev  '</span><span class="token operator">&gt;</span> <span class="token comment">// 'BFE. dev'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Trim<span class="token operator">&lt;</span><span class="token string">'  BFE .   dev  '</span><span class="token operator">&gt;</span> <span class="token comment">// 'BFE .   dev'</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TrimLeft<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span>TrimLeft<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token operator">:</span><span class="token constant">T</span>
<span class="token keyword">type</span> <span class="token class-name">TrimRight<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span> TrimRight<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Trim<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> TrimRight<span class="token operator">&lt;</span>TrimLeft<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><h3 id="replaceall"><a href="#replaceall" class="header-anchor">#</a> ReplaceAll</h3> <blockquote><p>Just like String.prototype.replaceAll(),please implement <code>ReplaceAll&lt;S, F, T&gt;</code>.</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ReplaceAll<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> 
  <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> 
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token string">''</span><span class="token operator">?</span> <span class="token constant">S</span><span class="token operator">:</span>
      <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">F</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">?</span> ReplaceAll<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token constant">F</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">P</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">P</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">S</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><h2 id="is"><a href="#is" class="header-anchor">#</a> is</h2> <h3 id="isany-🤓"><a href="#isany-🤓" class="header-anchor">#</a> IsAny 🤓</h3> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span>
</code></pre></div><p>需要知道any与除never之外的其他类型求交叉类型，都是any。</p> <h3 id="isnever-🤓"><a href="#isnever-🤓" class="header-anchor">#</a> IsNever 🤓</h3> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsNever<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span>
</code></pre></div><p>注意不能写成<code>type IsNever&lt;T&gt; = T extends never?true:false</code>,当T为never时，结果时never。</p> <h3 id="isemptytype-🤓"><a href="#isemptytype-🤓" class="header-anchor">#</a> IsEmptyType 🤓</h3> <blockquote><p>Implement <code>IsEmptyType&lt;T&gt;</code> to check if T is empty type {}.</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> IsEmptyType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> IsEmptyType<span class="token operator">&lt;</span><span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> IsEmptyType<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> IsEmptyType<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E</span></span> <span class="token operator">=</span> IsEmptyType<span class="token operator">&lt;</span>object<span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F</span></span> <span class="token operator">=</span> IsEmptyType<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 先判断是否是对象</span>
<span class="token keyword">type</span> <span class="token class-name">IsEmptyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&gt;</span></span><span class="token operator">?</span> 
  <span class="token comment">// 空对象 keyof操作是 never</span>
  <span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token operator">:</span>
  <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="杂"><a href="#杂" class="header-anchor">#</a> 杂</h2> <h3 id="flat-🤓"><a href="#flat-🤓" class="header-anchor">#</a> Flat 🤓</h3> <blockquote><p>Implement <code>Flat&lt;T&gt;</code> to flatten a tuple type.</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [1,2,3]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [1,2,3,4,5,6]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Flat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">?</span> 
    <span class="token comment">// F有可能还是数组类型 也可能不是</span>
    <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">?</span>
      <span class="token punctuation">[</span><span class="token operator">...</span>Flat<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token operator">...</span>Flat<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span>
      <span class="token punctuation">[</span><span class="token constant">F</span><span class="token punctuation">,</span><span class="token operator">...</span>Flat<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><h3 id="unwrappromise"><a href="#unwrappromise" class="header-anchor">#</a> UnwrapPromise</h3> <blockquote><p>Implement <code>UnwrapPromise&lt;T&gt;</code> to return the resolved type of a promise.</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> UnwrapPromise<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> UnwrapPromise<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;&gt;</span> <span class="token comment">// null</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> UnwrapPromise<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token comment">// Error</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnwrapPromise<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span><span class="token operator">?</span><span class="token constant">U</span><span class="token operator">:</span>Error<span class="token punctuation">;</span>
</code></pre></div><h3 id="uniontointersection"><a href="#uniontointersection" class="header-anchor">#</a> UnionToIntersection</h3> <blockquote><p>请实现<code>UnionToIntersection&lt;T&gt;</code>用以从Union得到Intersection。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span>b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span>c<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> 
<span class="token comment">// {a: string} &amp; {b: string} &amp; {c: string}</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token operator">?</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token builtin">any</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">void</span><span class="token operator">?</span><span class="token constant">R</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://fettblog.eu/typescript-union-to-intersection/" target="_blank" rel="noopener noreferrer">参考文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>第一个条件类型是分布式条件类型，其实起到了把联合类型拆开的目的，第二个条件类型是非分布式条件类型，同时由于函数的类型兼容性，对于函数参数是逆变，所以上面的R是各个被联合的类型的子类型。</p> <h3 id="filter-t-a"><a href="#filter-t-a" class="header-anchor">#</a> Filter&lt;T, A&gt;</h3> <blockquote><p>请实现Filter&lt;T, A&gt;，返回T中能够assign给A的type所组成的新tuple。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'BFE'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'dev'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token comment">// [1, 2]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'BFE'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'dev'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// ['BFE', 'dev']</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'BFE'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token string">'dev'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// ['BFE', any, 'dev']</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 拆分数组，一个元素一个元素处理</span>
<span class="token keyword">type</span> <span class="token class-name">Filter<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">?</span>
    <span class="token comment">// 判断F是否可以赋给A</span>
    <span class="token comment">// 这里要用非分布式条件类型 考虑到第三个case any的情况 如果是分布式条件类型的话 true和false分支都会运行</span>
    <span class="token punctuation">[</span><span class="token constant">F</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">]</span><span class="token operator">?</span>
        <span class="token punctuation">[</span><span class="token constant">F</span><span class="token punctuation">,</span><span class="token operator">...</span>Filter<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span>
        Filter<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span><span class="token constant">A</span><span class="token operator">&gt;</span>
    <span class="token comment">// 空数组了</span>
    <span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="equal"><a href="#equal" class="header-anchor">#</a> Equal</h3> <blockquote><p>Implement Equal&lt;A, B&gt; to check if two types are identical.</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>Equal<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
Equal<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
Equal<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
Equal<span class="token operator">&lt;</span><span class="token string">'BFE'</span><span class="token punctuation">,</span> <span class="token string">'BFE'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
Equal<span class="token operator">&lt;</span><span class="token string">'BFE'</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
Equal<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
Equal<span class="token operator">&lt;</span><span class="token punctuation">{</span>a <span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">isAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token comment">// 前半部分都是处理any的情况</span>
<span class="token keyword">type</span> <span class="token class-name">Equal<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> isAny<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span><span class="token operator">?</span>
    isAny<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span><span class="token operator">?</span>
        <span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span>
    <span class="token operator">:</span> isAny<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token boolean">false</span><span class="token operator">:</span>
        <span class="token comment">// 到这里没有any了 那么就是可以互相作为子类</span>
        <span class="token comment">// 要用非分布式类型 分布式类型处理不了never</span>
        <span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">B</span><span class="token punctuation">]</span> <span class="token operator">?</span>
        <span class="token punctuation">[</span><span class="token constant">B</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">]</span>
        <span class="token operator">?</span> <span class="token boolean">true</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token operator">:</span><span class="token boolean">false</span>

</code></pre></div><h3 id="findindex"><a href="#findindex" class="header-anchor">#</a> FindIndex</h3> <blockquote><p>正如Array.prototype.findIndex()， 请实现<code>FindIndex&lt;T, E&gt;</code>。</p></blockquote> <p>测试用例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> FindIndex<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// 2</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> FindIndex<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>
</code></pre></div><p>答案：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">FindIndex<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token punctuation">,</span><span class="token constant">H</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">O</span><span class="token punctuation">]</span><span class="token operator">?</span>
  Equal<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">,</span><span class="token constant">E</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span><span class="token operator">?</span> <span class="token constant">H</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token operator">:</span> FindIndex<span class="token operator">&lt;</span><span class="token constant">O</span><span class="token punctuation">,</span><span class="token constant">E</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token constant">H</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
  <span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/notebook/assets/js/app.5c5188eb.js" defer></script><script src="/notebook/assets/js/2.d716b987.js" defer></script><script src="/notebook/assets/js/87.064f4155.js" defer></script>
  </body>
</html>
